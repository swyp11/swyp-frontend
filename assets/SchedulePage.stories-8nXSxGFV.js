import{a as z,u as H,r as u,j as t,n as b,g as N}from"./iframe-BXIlaz2d.js";import{W as L}from"./WeekCalendar-BTpC7yJz.js";import{D as q}from"./DayCalendar-shAPUin0.js";import{V as B}from"./ViewSelector-BZDbVSPk.js";import{N as w}from"./NavigationHeader-BSHZfyc-.js";import{w as G}from"./withAuth-CJcshunz.js";import{w as J}from"./decorators-Cos6l-TR.js";import"./preload-helper-ByZkdcDp.js";function M(){const{checkAuth:S}=z(),k=H(),[s,n]=u.useState(10),[a,d]=u.useState(2024),[o,m]=u.useState(10),[l,C]=u.useState("weekly"),[D,Q]=u.useState([]),P=new Date(a,s,0).getDate(),j=new Date(a,s-1,1).getDay(),V=()=>{s===1?(n(12),d(a-1)):n(s-1)},E=()=>{s===12?(n(1),d(a+1)):n(s+1)},Y=()=>{const e=new Date(a,s-1,o);e.setDate(e.getDate()-1),d(e.getFullYear()),n(e.getMonth()+1),m(e.getDate())},T=()=>{const e=new Date(a,s-1,o);e.setDate(e.getDate()+1),d(e.getFullYear()),n(e.getMonth()+1),m(e.getDate())},W=()=>{const e=new Date(a,s-1,o);e.setDate(e.getDate()-7),d(e.getFullYear()),n(e.getMonth()+1),m(e.getDate())},$=()=>{const e=new Date(a,s-1,o);e.setDate(e.getDate()+7),d(e.getFullYear()),n(e.getMonth()+1),m(e.getDate())},F=()=>{const e={};return D.forEach(c=>{const i=c.startDate.getDate(),h=c.startDate.getMonth()+1,y=c.startDate.getFullYear();h===s&&y===a&&(e[i]||(e[i]=[]),e[i].push(c.title))}),e},_=()=>D.map(e=>({id:e.id,title:e.title,startTime:e.startTime,endTime:e.endTime,dayOfWeek:e.startDate.getDay(),color:e.color})),A=()=>D.filter(e=>{const c=e.startDate.getDate(),i=e.startDate.getMonth()+1,h=e.startDate.getFullYear();return c===o&&i===s&&h===a}).map(e=>({id:e.id,title:e.title,startTime:e.startTime,duration:e.endTime-e.startTime,color:e.color})),O=()=>{const e=[],i=F(),h=j===0?6:j-1;for(let r=0;r<h;r++)e.push(t.jsx("div",{className:"h-20 border-r border-b border-[#f1f1f1]"},`empty-${r}`));for(let r=1;r<=P;r++){const v=i[r];e.push(t.jsx("div",{className:"h-20 border-r border-b border-[#f1f1f1] p-1 bg-white cursor-pointer hover:bg-surface-2",onClick:()=>m(r),children:t.jsxs("div",{className:"flex flex-col gap-1 h-full",children:[t.jsx("div",{className:"flex justify-center pt-1",children:r===o?t.jsx("div",{className:"w-5 h-5 rounded-full bg-primary flex items-center justify-center",children:t.jsx("span",{className:"label-2 text-white",children:r})}):t.jsx("span",{className:"label-2 text-on-surface-subtle",children:r})}),v&&t.jsx("div",{className:"flex flex-col gap-0.5 px-1",children:v.map((I,R)=>t.jsx("div",{className:"bg-alert rounded-xs px-1 py-0.5 overflow-hidden",children:t.jsx("p",{className:"text-white text-[9px] leading-3 overflow-hidden text-ellipsis whitespace-nowrap",children:I})},R))})]})},r))}const y=35-e.length;for(let r=0;r<y;r++)e.push(t.jsx("div",{className:"h-20 border-r border-b border-[#f1f1f1] opacity-0"},`empty-end-${r}`));return e};return t.jsxs("div",{className:"relative",children:[t.jsxs("div",{className:"pb-16",children:[t.jsx("div",{className:"px-2 pb-4",children:t.jsxs("div",{className:"bg-surface-2 rounded-lg px-4 py-2.5 flex items-center justify-between",children:[t.jsxs("button",{className:"flex items-center gap-2",onClick:()=>{S()&&console.log("D-day 수정")},children:[t.jsx("span",{className:"body-2-medium text-[#787878]",children:"결혼식까지"}),t.jsx("span",{className:"body-2-medium text-primary font-bold",children:"D-99"}),t.jsx(b,{alt:"",src:N("/img/edit.svg"),width:16,height:16})]}),t.jsx(B,{currentView:l,onViewChange:C})]})}),l==="monthly"&&t.jsx(w,{onPrev:V,onNext:E,title:`${s}월`,showDropdown:!0}),l==="weekly"&&t.jsx(w,{onPrev:W,onNext:$,title:`${s}월`,showDropdown:!0}),l==="daily"&&t.jsx(w,{onPrev:Y,onNext:T,title:`${s}월 ${o}일`,showDropdown:!1}),l==="monthly"&&t.jsxs("div",{className:"flex-1 flex flex-col w-full overflow-hidden",children:[t.jsx("div",{className:"grid grid-cols-7 border-b border-[#f1f1f1] flex-none",children:["월","화","수","목","금","토","일"].map(e=>t.jsx("div",{className:"h-7 flex items-center justify-center bg-white",children:t.jsx("span",{className:"label-2 text-on-surface-subtle",children:e})},e))}),t.jsx("div",{className:"flex-1 overflow-y-auto",children:t.jsx("div",{className:"grid grid-cols-7",children:O()})})]}),l==="weekly"&&t.jsx("div",{className:"flex-1 overflow-hidden",children:t.jsx(L,{currentDate:new Date(a,s-1,o),events:_()})}),l==="daily"&&t.jsx("div",{className:"flex-1 overflow-hidden",children:t.jsx(q,{currentDate:new Date(a,s-1,o),events:A()})})]}),t.jsx("button",{onClick:()=>k.push("/schedule/add"),className:"fixed bottom-24 w-12 h-12 bg-primary rounded-full flex items-center justify-center shadow-lg z-40",style:{right:"calc(50% - var(--app-width)/2 + 1rem)"},children:t.jsx(b,{alt:"",src:N("/img/add.svg"),width:24,height:24})})]})}const K=G(M);M.__docgenInfo={description:"",methods:[],displayName:"SchedulePage"};const oe={title:"Pages/Schedule/SchedulePage",component:K,decorators:[J],parameters:{layout:"fullscreen",nextjs:{appDirectory:!0}},tags:["autodocs"]},p={},x={parameters:{docs:{description:{story:"월별 캘린더 뷰 - 한 달의 모든 날짜와 일정을 표시합니다."}}}},f={parameters:{docs:{description:{story:"주별 캘린더 뷰 - 일주일의 시간대별 일정을 표시합니다."}}}},g={parameters:{docs:{description:{story:"일별 캘린더 뷰 - 하루의 시간대별 상세 일정을 표시합니다."}}}};p.parameters={...p.parameters,docs:{...p.parameters?.docs,source:{originalSource:"{}",...p.parameters?.docs?.source}}};x.parameters={...x.parameters,docs:{...x.parameters?.docs,source:{originalSource:`{
  parameters: {
    docs: {
      description: {
        story: '월별 캘린더 뷰 - 한 달의 모든 날짜와 일정을 표시합니다.'
      }
    }
  }
}`,...x.parameters?.docs?.source}}};f.parameters={...f.parameters,docs:{...f.parameters?.docs,source:{originalSource:`{
  parameters: {
    docs: {
      description: {
        story: '주별 캘린더 뷰 - 일주일의 시간대별 일정을 표시합니다.'
      }
    }
  }
}`,...f.parameters?.docs?.source}}};g.parameters={...g.parameters,docs:{...g.parameters?.docs,source:{originalSource:`{
  parameters: {
    docs: {
      description: {
        story: '일별 캘린더 뷰 - 하루의 시간대별 상세 일정을 표시합니다.'
      }
    }
  }
}`,...g.parameters?.docs?.source}}};const ne=["Default","MonthlyView","WeeklyView","DailyView"];export{g as DailyView,p as Default,x as MonthlyView,f as WeeklyView,ne as __namedExportsOrder,oe as default};
