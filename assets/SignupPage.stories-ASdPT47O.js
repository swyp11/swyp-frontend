import{u as w,r as l,j as e}from"./iframe-BXIlaz2d.js";import{B as E}from"./BackHeader-Cx1EfD0_.js";import{w as V}from"./decorators-Cos6l-TR.js";import"./preload-helper-ByZkdcDp.js";function f(){const h=w(),[s,g]=l.useState(""),[n,j]=l.useState(""),[i,y]=l.useState(!1),[o,t]=l.useState(""),[c,b]=l.useState(""),[d,x]=l.useState(!1),u=a=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a),N=a=>{const r=a.target.value;g(r),t("")},v=a=>{const r=a.target.value;j(r),b("")},S=async()=>{if(!s){t("이메일을 입력해주세요.");return}if(!u(s)){t("올바른 이메일 형식이 아닙니다.");return}x(!0),t("");try{const r=await(await fetch("/api/auth/verify-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s})})).json();r.success?(y(!0),t("")):t(r.error||"인증요청에 실패했습니다.")}catch(a){console.error("Verification request error:",a),t("서버 오류가 발생했습니다. 잠시 후 다시 시도해주세요.")}finally{x(!1)}},p=s&&u(s)&&i&&n.trim()!==""&&!o&&!c,C=()=>{p&&(localStorage.setItem("signupData",JSON.stringify({email:s,verificationCode:n})),console.log("Sign up step 1 data:",{email:s,verificationCode:n}),h.push("/signup/step2"))};return e.jsxs("div",{className:"bg-white flex flex-col h-screen mx-auto",style:{width:"var(--app-width)"},children:[e.jsx(E,{title:"회원가입"}),e.jsxs("div",{className:"flex-1 flex flex-col px-4 pt-6 overflow-y-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsx("h1",{className:"title-1 text-on-surface",children:i?e.jsxs(e.Fragment,{children:["입력하신 이메일 주소로",e.jsx("br",{}),"인증번호가 발송되었습니다."]}):e.jsxs(e.Fragment,{children:["계정 생성을 위해",e.jsx("br",{}),"이메일을 입력해주세요."]})})}),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx("label",{className:"body-3 font-medium text-secondary",children:"이메일"}),e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsx("div",{className:"flex-1 flex flex-col gap-1.5",children:e.jsx("input",{type:"email",name:"email",value:s,onChange:N,placeholder:"이메일을 입력해주세요.",className:`field h-12 w-full ${o?"field-error":""}`,disabled:d||i})}),e.jsx("button",{onClick:S,disabled:!s||d,className:`btn h-12 px-5 shrink-0 ${!s||d?"btn-tertiary opacity-40":"btn-tertiary"}`,children:d?"전송 중...":i?"재전송":"인증요청"})]}),o&&e.jsx("p",{className:"field-error-text",children:o})]}),i&&e.jsxs("div",{className:"flex flex-col gap-1.5",children:[e.jsx("label",{className:"body-3 font-medium text-secondary",children:"인증번호 입력"}),e.jsx("input",{type:"text",name:"verificationCode",value:n,onChange:v,placeholder:"인증번호 6자리를 입력해주세요.",maxLength:6,className:`field h-12 w-full ${c?"field-error":""}`}),c&&e.jsx("p",{className:"field-error-text",children:c}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("p",{className:"label-1 text-on-surface-subtle",children:"• 메일 도착까지 최대 1~2분 걸릴 수 있어요."}),e.jsx("p",{className:"label-1 text-on-surface-subtle",children:"• 스팸함・프로모션함을 확인해보세요."})]})]})]})]}),e.jsx("div",{className:"px-4 py-4 border-t border-[#f1f1f1]",children:e.jsx("button",{onClick:C,disabled:!p,className:`btn btn-primary w-full ${p?"":"opacity-40"}`,children:"다음"})})]})}f.__docgenInfo={description:"",methods:[],displayName:"SignupPage"};const D={title:"Pages/Auth/SignupPage",component:f,decorators:[V],parameters:{layout:"fullscreen",nextjs:{appDirectory:!0}},tags:["autodocs"]},m={parameters:{docs:{description:{story:"회원가입 페이지 - 신규 사용자가 회원가입할 수 있는 화면입니다."}}}};m.parameters={...m.parameters,docs:{...m.parameters?.docs,source:{originalSource:`{
  parameters: {
    docs: {
      description: {
        story: '회원가입 페이지 - 신규 사용자가 회원가입할 수 있는 화면입니다.'
      }
    }
  }
}`,...m.parameters?.docs?.source}}};const I=["Default"];export{m as Default,I as __namedExportsOrder,D as default};
